<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Schedule Meetup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<div class="main-content">

    <div class="section" style="max-width: 600px; margin: auto;">
        <h2>Schedule Meetup for <span style="color: #333;">{{ application_id }}</span></h2>

        {% if error %}
            <div class="error">{{ error }}</div>
        {% endif %}
        {% if success %}
            <div class="success">{{ success }}</div>
        {% endif %}

        <form method="POST" class="schedule-form">
            <div class="form-group">
                <label for="date">Date:</label>
                <input type="date" id="date" name="date" value="{{ meeting_info.date if meeting_info else '' }}" required>
            </div>

            <div class="form-group">
                <label for="time">Time:</label>
                <input type="time" id="time" name="time" min="08:00" max="22:00" value="{{ meeting_info.time if meeting_info else '' }}" required>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input
                    type="tel"
                    id="phone"
                    name="phone"
                    placeholder="+60123456789"
                    pattern="^\+60[1-9][0-9]{7,10}$"
                    title="Please enter a Malaysian phone number starting with +60 followed by 8 to 11 digits"
                    value="{{ meeting_info.phone if meeting_info else '' }}"
                    required>
            </div>

            <div class="form-group">
                <label for="state">State:</label>
                <select id="state" name="state" onchange="this.form.submit()" required>
                    <option value="">-- Select State --</option>
                    {% for state in state_cities.keys() %}
                        <option value="{{ state }}" {% if state == selected_state %}selected{% endif %}>{{ state }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="city">City:</label>
                <select id="city" name="city" required>
                    <option value="">-- Select City --</option>
                    {% for city in city_list %}
                        <option value="{{ city }}" {% if meeting_info and meeting_info.city == city %}selected{% endif %}>{{ city }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="notes">Notes (Optional):</label>
                <textarea id="notes" name="notes" placeholder="Add notes about the meetup...">{{ meeting_info.notes if meeting_info else '' }}</textarea>
            </div>

            <input type="hidden" name="final_submit" id="final_submit" value="">

            <div style="display: flex; justify-content: space-between; gap: 12px;">
                <button type="submit" class="btn" onclick="document.getElementById('final_submit').value='';">Save Schedule</button>
                <button type="submit" class="btn" onclick="document.getElementById('final_submit').value='finalize';">Finalize Adoption</button>
            </div>
        </form>
    </div>

</div>

</body>
</html>