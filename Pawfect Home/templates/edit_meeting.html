<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Edit Meetup - Application {{ app_id }}</title>
</head>
<body>
    <h1>Edit Meetup for Application {{ app_id }}</h1>

    {% if error %}
        <p style="color: red;">Error: {{ error }}</p>
    {% endif %}
    {% if success %}
        <p style="color: green;">{{ success }}</p>
    {% endif %}

    <form method="post">
        <label for="date">Date:</label><br>
        <input type="date" id="date" name="date" required value="{{ meeting.date if meeting else '' }}"><br><br>

        <label for="time">Time:</label><br>
        <input type="time" id="time" name="time" min="08:00" max="22:00" required value="{{ meeting.time if meeting else '' }}"><br><br>

        <label for="phone">Phone (e.g. +60123456789):</label><br>
        <input type="tel" id="phone" name="phone" pattern="^\+60[1-9][0-9]{7,10}$" required
               value="{{ meeting.phone if meeting else '' }}" placeholder="+60123456789"><br><br>

        <label for="state">State:</label><br>
        <select id="state" name="state" onchange="this.form.submit()" required>
            <option value="">-- Select State --</option>
            {% for state in state_cities.keys() %}
                <option value="{{ state }}" {% if state == selected_state %}selected{% endif %}>{{ state }}</option>
            {% endfor %}
        </select><br><br>

        <label for="city">City:</label><br>
        <select id="city" name="city" required>
            <option value="">-- Select City --</option>
            {% for city in city_list %}
                <option value="{{ city }}" {% if meeting and meeting.city == city %}selected{% endif %}>{{ city }}</option>
            {% endfor %}
        </select><br><br>

        <label for="notes">Notes:</label><br>
        <textarea id="notes" name="notes" rows="4" cols="50">{{ meeting.notes if meeting else '' }}</textarea><br><br>

        <button type="submit">Update Meetup</button>
    </form>
    <p><a href="{{ url_for('track_admin') }}">Back to Meetup List</a></p>
</body>
</html>